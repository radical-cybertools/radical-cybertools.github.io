<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RADICAL Cybertools | RADICAL-Pilot</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/simplex-theme.min.css" rel="stylesheet">
    <link href="../css/jumbotron.css" rel="stylesheet">
    <link href="../css/stickyfooter.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>


    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../index.html" class="navbar-brand">RADICAL Cybertools</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">Tools <span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="themes">
                <li><a href="../saga-python/index.html">RADICAL-SAGA</a></li>
                <li><a href="../radical-pilot/index.html">RADICAL-Pilot</a></li>
                <li><a href="../entk/index.html">Ensemble Toolkit</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">Quick Links <span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="themes">
                <li><a href="./basic_example.html">Basic Example</a></li>
                <li><a href="./quick_start.html">Getting Started</a></li>
                <li><a href="./index.html">More Info</a></li>
                <li><a href="http://radicalpilot.readthedocs.org/en/latest">Documentation</a></li>
                <li><a href="https://github.com/radical-cybertools/radical.pilot">Github Project</a></li>
              </ul>
            </li>
            <li>
              <a href="http://radical.rutgers.edu/publications/">Publications</a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="mailto:shantenu.jha@rutgers.edu?subject=RADICAL Cybertools" target="_blank">Contact</a></li>
          </ul>

        </div>
      </div>
    </div>


    <!-- ========== -->
    <script>
var Executed = 0;
function execute1(){    
        document.getElementById("output1").innerHTML = '';
        setTimeout(myTimeout1, (Math.random()*1000)) 
}
function myTimeout1() {
  document.getElementById("output1").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>0.42</pre></div></div></div>';
}

function execute2(){
        document.getElementById("output2").innerHTML = '';
        setTimeout(myTimeout2, (Math.random()*1000))

}
function myTimeout2() {
    document.getElementById("output2").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Session id: rp.session.ip-10-144-47-195.radical.016754.0005<br>Pilot Manager: pmgr.0005<br>Unit Manager: umgr.0005</pre></div></div></div>';
        Executed=2;
}

function execute3(){
        document.getElementById("output3").innerHTML = '';
    if (Executed > 0){
            setTimeout(myTimeout3, (Math.random()*1000))
        }
        else{
            document.getElementById("output3").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        }
}
function myTimeout3() {
    document.getElementById("output3").innerHTML = '<div class="output"><div class="output_area"><div class="output_html rendered_html output_subarea output_execute_result"><div><table border="1" class="dataframe"><thead><tr style="text-align: right;"><th></th><th>Value</th></tr></thead><tbody><tr><th>uid</th><td>umgr.0005</td></tr><tr><th>scheduler</th><td>RoundRobinScheduler</td></tr><tr><th>scheduler_details</th><td>NO SCHEDULER DETAILS (Not Implemented)</td></tr></tbody></table></div></div></div></div>';
    Executed = 2;
}

function execute4(){ 
        document.getElementById("output4").innerHTML = '';
        if (Executed > 1){
                setTimeout(myTimeout4, (Math.random()*1000)) 
            }
        else{
            document.getElementById("output4").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        }
}
function myTimeout4() {
    document.getElementById("output4").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>uid: pilot.0005<br>resource: local.localhost<br>sandbox: file://localhost/home/radical/radical.pilot.sa...<br>state: PendingLaunch</pre></div></div></div>';
        Executed = 4;
}


function execute5(){    
        document.getElementById("output5").innerHTML = '';
        if( Executed > 2){
            Executed = 4; }
        else{
            document.getElementById("output5").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        }
}

function execute6() {
        document.getElementById("output6").innerHTML = '';
        if (Executed > 3){
                setTimeout(myTimeout6, 2000) 
                setTimeout(myTimeout7, 4000) 
                setTimeout(myTimeout8, 6000+(Math.random()*1000)) }
        else{
            document.getElementById("output6").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        }
}
function myTimeout6() {
    document.getElementById("output6").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Submit Compute Units to Unit Manager ...</pre></div></div></div>';
}
function myTimeout7() {
    document.getElementById("output6").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Submit Compute Units to Unit Manager ...<br>Waiting for CUs to complete ...</pre></div></div></div>';
}
function myTimeout8() {
    document.getElementById("output6").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Submit Compute Units to Unit Manager ...<br>Waiting for CUs to complete ...<br>All CUs completed successfully!</pre></div></div></div>';
    Executed = 5;
}


function execute7() {
        document.getElementById("output7").innerHTML = '';
        if (Executed > 4){
                setTimeout(myTimeout9,(Math.random()*1000))
		setTimeout(myTimeout12,1000+(Math.random()*1000))}   
        else{
            document.getElementById("output7").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        } 
}
function myTimeout9() {
    document.getElementById("output7").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>I am CU number 1</pre></div></div></div>';
    Executed = 6;
}

function myTimeout12() {
    document.getElementById("output7").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>I am CU number 1<br>I am CU number 2</pre></div></div></div>';
    Executed = 6;
}

function execute8() {
        document.getElementById("output8").innerHTML = '';
        if (Executed > 5){
                setTimeout(myTimeout10,(Math.random()*1000)) }
        else{
            document.getElementById("output8").innerHTML='<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Please execute previous Shells</pre></div></div></div>';
        }
}
function myTimeout10() {
    document.getElementById("output8").innerHTML = '<div class="output"><div class="output_area"><div class="prompt"></div><div class="output_subarea output_stream output_stdout output_text"><pre>Session closed</pre></div></div></div>';
    Executed =0;
}
</script>

<div class="container">
 <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="RADICAL-Pilot-Tutorial">Basic User Guide<a class="anchor-link" href="#RADICAL-Pilot-Tutorial"></a></h1>

<h2 id="1-RADICAL-Pilot-Setup">1 RADICAL-Pilot Setup<a class="anchor-link" href="#1-RADICAL-Pilot-Setup"></a></h2><p>Documentation: <a href="http://radicalpilot.readthedocs.org/en/latest/machconf.html#preconfigured-resources">http://radicalpilot.readthedocs.org/en/latest/machconf.html#preconfigured-resources</a></p>
<p>First, we will import the necessary dependencies.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">radical.pilot</span> <span class="kn">as</span> <span class="nn">rp</span>
<span class="o"></span>print rp.version
</pre></div>

</div>
</div>
</div>
<button onclick="execute1()">Execute</button>


<div class="output_wrapper" id="output1">

</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2.-Local-Pilot-Example">2. Local Pilot Example<a class="anchor-link" href="#2.-Local-Pilot-Example"></a></h2><p>This example shows how to execute simple tasks using a Pilot-Job.</p>
<h3 id="2.1-Create-a-new-Session-and-Pilot-Manager.">2.1 Create a new Session and Managers.<a class="anchor-link" href="#2.1-Create-a-new-Session-and-Pilot-Manager."></a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">session</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">pmgr</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">PilotManager</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
<span class="n">umgr</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">UnitManager</span> <span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span><span class="n">scheduler</span><span class="o">=</span><span class="n">rp</span><span class="o">.</span><span class="n">SCHED_ROUND_ROBIN</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;Session id: </span><span class="si">%s \n \</span><br><span class="s2"> Pilot Manager: </span><span class="si">%s \n \</span><br><span class="s2"> Unit Manager: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span> <span class="n">pmgr</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span> <span class="n">umgr</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<button onclick="execute2()">Execute</button>
<div class="output_wrapper" id="output2">

</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.2-Submit-Pilot-and-add-to-Unit-Manager">2.2 Submit Pilot and add to Unit Manager<a class="anchor-link" href="#2.2-Submit-Pilot-and-add-to-Unit-Manager"></a></h3><p>Create a description of the Pilot, which specifies its target resource, size and runtime.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">pdesc</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">ComputePilotDescription</span><span class="p">()</span>
<span class="n">pdesc</span><span class="o">.</span><span class="n">resource</span> <span class="o">=</span> <span class="s2">&quot;local.localhost&quot;</span>
<span class="n">pdesc</span><span class="o">.</span><span class="n">runtime</span>  <span class="o">=</span> <span class="mi">10</span> <span class="c1"># minutes</span>
<span class="n">pdesc</span><span class="o">.</span><span class="n">cores</span>    <span class="o">=</span> <span class="mi">2</span>
<span class="n">pilot</span> <span class="o">=</span> <span class="n">pmgr</span><span class="o">.</span><span class="n">submit_pilots</span><span class="p">(</span><span class="n">pdesc</span><span class="p">)</span>
<span class="n">umgr</span><span class="o">.</span><span class="n">add_pilots</span><span class="p">(</span><span class="n">pilot</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>umgr.add_pilot(pilot)</code> binds a Pilot to a Unit Manager. This informs the Unit Manager that the resources of the Pilot can be used for exeuction of Units. Multiple Pilots can be bound to a Unit Manager, and later be removed via <code>umgr.remove_pilot()</code>. The Unit Manager will schedule incoming Compute Units across all available Pilots.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">print "uid: ",</span> <span class="n">pilot</span><span class="o">.</span><span class="n">uid</span>
<span class="n">print "resource: ",</span> <span class="n">pilot</span><span class="o">.</span><span class="n">resource</span>
<span class="n">print "sandbox: ",</span> <span class="n">pilot</span><span class="o">.</span><span class="n">sandbox</span>
<span class="n">print "state: ",</span> <span class="n">pilot</span><span class="o">.</span><span class="n">state</span>
</pre></div>
</div>
</div>
</div>

<button onclick="execute4()">Execute</button>




<div class="output_wrapper" id="output4">

</div>


</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.3-Submit-Compute-Units">2.3 Submit Compute Units<a class="anchor-link" href="#2.3-Submit-Compute-Units"></a></h3><p>Create a description of the Compute Unit, which specifies the details of the task to be executed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">cudesc1</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">ComputeUnitDescription</span><span class="p">()</span>
<span class="n">cudesc1</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CU_NO&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="n">cudesc1</span><span class="o">.</span><span class="n">executable</span>  <span class="o">=</span> <span class="s2">&quot;/bin/echo&quot;</span>
<span class="n">cudesc1</span><span class="o">.</span><span class="n">arguments</span>   <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I am CU number $CU_NO&#39;</span><span class="p">]</span>
<span class="n">cudesc1</span><span class="o">.</span><span class="n">cores</span>       <span class="o">=</span> <span class="mi">1</span><br>
<span class="n">cudesc2</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">ComputeUnitDescription</span><span class="p">()</span>
<span class="n">cudesc2</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CU_NO&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">cudesc2</span><span class="o">.</span><span class="n">executable</span>  <span class="o">=</span> <span class="s2">&quot;/bin/echo&quot;</span>
<span class="n">cudesc2</span><span class="o">.</span><span class="n">arguments</span>   <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I am CU number $CU_NO&#39;</span><span class="p">]</span>
<span class="n">cudesc2</span><span class="o">.</span><span class="n">cores</span>       <span class="o">=</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Submit the previously created Compute Unit descriptions to the Unit Manager. This will trigger the selected scheduler (in this case the Round-Robin scheduler) to start assigning Compute Units to the Pilots.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="k">print</span> <span class="s2">&quot;Submit Compute Units to Unit Manager ...&quot;</span>
<span class="n">cu_set</span> <span class="o">=</span> <span class="n">umgr</span><span class="o">.</span><span class="n">submit_units</span><span class="p">([</span><span class="n">cudesc1, cudesc2</span><span class="p">])</span>
<span class="k">print</span> <span class="s2">&quot;Waiting for CUs to complete ...&quot;</span>
<span class="n">umgr</span><span class="o">.</span><span class="n">wait_units</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;All CUs completed successfully!&quot;</span>
</pre></div>

</div>
</div>
</div>
<button onclick="execute6()">Execute</button>


<div class="output_wrapper" id="output6">

</div>

</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Inspect the output of the CUs</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="k">print</span> <span class="n">cu_set[0]</span><span class="o">.</span><span class="n">stdout</span>
<span class="k">print</span> <span class="n">cu_set[1]</span><span class="o">.</span><span class="n">stdout</span>
</pre></div>

</div>
</div>
</div>

<button onclick="execute7()">Execute</button>


<div class="output_wrapper" id="output7">

</div>

</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.6-Close-and-Delete-Session">2.6 Close Session<a class="anchor-link" href="#2.6-Close-and-Delete-Session"></a></h3><p>The session must always be closed before exiting: this will tear down the Pilots, which would otherwise continue to consume resources until their specified runtime is up.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="inner_cell">
        <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<button onclick="execute8()">Execute</button>


<div class="output_wrapper" id="output8">

</div>

</div>

</div>
    <div id="footer">
      <div class="container">
        <p align="center">Copyright &copy; 2016 <a href="http://radical.rutgers.edu">RADICAL Research</a> at 
          <a href="http://www.rutgers.edu">
          Rutgers University </a></p>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/smoothscroll.js"></script>
  </body>
</html>
